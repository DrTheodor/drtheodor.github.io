All this code is a modified version of https://github.com/flodlc/nebula
